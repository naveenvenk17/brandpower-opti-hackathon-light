<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}BrandCompass.ai{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="icon" type="image/png"
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==">
    {% block extra_head %}{% endblock %}
</head>

<body>
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a href="/" class="logo">
                    <span class="logo-text">BrandCompass.ai</span>
                </a>
                <div class="nav-links">
                    <a href="/" class="nav-link" id="nav-home">Home</a>
                    <a href="/analysis" class="nav-link" id="nav-analysis">Analysis</a>
                    <a href="/optimization" class="nav-link" id="nav-optimization">Optimization</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 BrandCompass.ai. Navigate Your Brand's Power with Precision.</p>
        </div>
    </footer>

    <script src="/static/js/main.js"></script>
    <script>
        // Highlight active nav link
        (function() {
            const path = location.pathname;
            const id = path.startsWith('/analysis') ? 'nav-analysis' : path.startsWith('/optimization') ? 'nav-optimization' : 'nav-home';
            const el = document.getElementById(id);
            if (el) el.classList.add('active');
        })();
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>
    {% block extra_scripts %}{% endblock %}

    <!-- Chat backdrop overlay -->
    <div id="chat-backdrop" class="chat-backdrop"></div>

    <div id="chat-icon" class="chat-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
            <path fill-rule="evenodd" d="M4.804 21.644A6.707 6.707 0 006 21.75a6.721 6.721 0 003.583-1.029c.774.182 1.584.279 2.417.279 5.352 0 9.75-2.91 9.75-6.5s-4.398-6.5-9.75-6.5c-5.352 0-9.75 2.91-9.75 6.5 0 1.908.994 3.646 2.596 4.829-.244.84-.987 1.5-1.93 1.838A2.25 2.25 0 012.25 18.75a.75.75 0 01.75-.75Z" clip-rule="evenodd" />
        </svg>
    </div>

    <div id="chat-widget" class="chat-widget">
        <div class="chat-header">
            <h2>Chat with BrandCompass.ai</h2>
            <div class="chat-header-actions">
                <button id="refresh-chat" class="refresh-chat" title="Clear chat history">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="1 4 1 10 7 10"></polyline>
                        <polyline points="23 20 23 14 17 14"></polyline>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                    </svg>
                </button>
                <button id="close-chat" class="close-chat">&times;</button>
            </div>
        </div>
        <div id="chat-body" class="chat-body"></div>
        <div class="chat-footer">
            <input type="text" id="chat-input" placeholder="Ask a question...">
            <button id="send-chat">Send</button>
        </div>
    </div>
</body>

</html>